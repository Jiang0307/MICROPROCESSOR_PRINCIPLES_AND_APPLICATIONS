LIST p=18f4520
#include<p18f4520.inc>
    CONFIG OSC = INTIO67
    CONFIG WDT = OFF
    ORG 0x00

Initial:
    MOVLF MACRO literal,F
	MOVLW literal
	MOVWF F
	CLRF WREG
    ENDM

START:
    CLRF TRISA  ;current
    CLRF 0x000  ;answer
    CLRF WREG
    LFSR 0,0x010
    MOVLF D'6',INDF0
    RCALL FIBONACCI
    RCALL FINISH
    
FIBONACCI:
    MOVFF INDF0,TRISA
    MOVLW D'1'
    CPFSGT TRISA
    GOTO ZERO_OR_ONE
    GOTO GREATER_THAN_ONE
    
    ZERO_OR_ONE:
	CLRF WREG
	CPFSEQ TRISA
	GOTO ONE
	GOTO ZERO
	
	ZERO:
	    NOP
	    RETURN
	ONE:
	    INCF 0x000
	    RETURN
    
    GREATER_THAN_ONE:
	DECF TRISA
	MOVFF TRISA,PREINC0
	RCALL FIBONACCI
	
	DECF INDF0
	RCALL FIBONACCI
	
	CLRF?INDF0
	MOVF POSTDEC0
	
	RETURN
    
FINISH:
    NOP
    END